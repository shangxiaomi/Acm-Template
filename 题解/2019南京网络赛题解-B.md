
##[B.super_log](https://nanti.jisuanke.com/t/41299)
###题意：
求$$a^{a^{a^{a^{...}}}}$$
b表示有几个a,b=0时答案为1。
特殊情况：
1.$m=1$时答案为0
2.$m\ne1$&&$a=1$时答案为1
3.$m\ne1$&&$b=1$时答案为1
然后就欧拉降幂迭代就行。注意在这里欧拉函数不打表反而比较快
注意：**搞清楚各个函数的模到底是MOD还是phi（MOD）**
附上降幂公式：
$$a^b=
\begin{cases}
{a^{b\%phi[p]}}& {gcd(a,p)=1}\\
{a^b}& gcd(a,p)\ne 1\;\&\&\;b<phi[p]\;\&\&\;b\;\%\;phi\ne 0\\
{a^{b\%phi[p]+phi[p]}} & gcd(a,p)\ne1\;\&\&\;b\ge phi[p]\;||\;b\;\%\;phi=0
 \end{cases}$$
注意迭代过程中会出现的W=lowPow( A, B - 1, phi)的情况

伪代码
if(模 == 1) ans = 0，return
if(底数 == 1) ans = 1, return 
if(gcd == 1) ans = ... return
W = 指数。
if(W < phi[模]&&W!=0) ans = a ^ W return
else ans = a ^ (W + phi[模]) return



```cpp
#include<bits/stdc++.h>
#define rr(o) (o << 1 | 1)
#define MID(l,r)  (l+r)>>1
using namespace std;
typedef long long LL;
typedef long long ll;
typedef double db;
const int MAXN=1000000+7;
long long eular(long long n)
{
    long long ans = n;
    for(int i = 2; i*i <= n; i++)
    {
        if(n % i == 0)
        {
            ans -= ans/i; //等价于通项，把n乘进去
            while(n % i == 0) //确保下一个i是n的素因数
                n /= i;
        }
    }
    if(n > 1)ans -= ans/n; //最后可能还剩下一个素因数没有除
    return ans;
}
int quickPow(int a,int b, int MOD){
    int ans = 1;
    while(b){
        if(b % 2 == 1)
            ans = 1LL * ans * a % MOD;
        a = 1LL * a * a % MOD;
        b = b / 2;
    }
    return ans;
}

LL lowPow(LL A , LL B , LL MOD){
    if( MOD == 1 ) return 0;
    if( B == 0 ) return 1;
    int G=__gcd(A,MOD);
    int phi=eular(MOD);
    LL W=lowPow( A, B - 1, phi);
    if(G==1)return quickPow(A,W%phi,MOD);
    if( W < phi&&W) return quickPow(A , W , MOD);
    return quickPow(A, W + phi , MOD);
}

int main()
{
    int T;
    scanf("%d",&T);
    while(T--){
        int a,b,m;
        scanf("%d %d %d",&a,&b,&m);
        if(a==1){
            if(m!=1)cout<<1<<endl;
            else cout<<0<<endl;
            continue;
        }
        cout<<lowPow(a, b, m)<<endl;
    }
    return 0;
}

```